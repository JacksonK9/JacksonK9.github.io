<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
  class="html"
><head>
  <title>
    
      
        우아한형제들 - 배달로봇 딜리 |

      
      Jackson Kim


    
  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.95.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Jackson Kim" />
  <meta
    name="description"
    content="
      Wanna be Good SLAMer


    "
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.b2e0cb07595e3519ab1193bb421914e06c0e26b0cc561fef23b3c6131d4d2ffa.css"
      integrity="sha256-suDLB1leNRmrEZO7QhkU4GwOJrDMVh/vI7PGEx1NL/o="
      crossorigin="anonymous"
      type="text/css"
    />

  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css"
    integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU="
    crossorigin="anonymous"
    type="text/css"
  />
  
    <link rel="stylesheet" href="http://JacksonK9.github.io/css/table.css"/>
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.b1c4e6a10bdbab01f33fff9d78816ee68cf9a9a731f07668afd546a79924cb80.css"
    integrity="sha256-scTmoQvbqwHzP/&#43;deIFu5oz5qacx8HZor9VGp5kky4A="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.423dee17c62f55fa733a4ee13e00d523dfce88cc4f4ab4549a24ba36bd9de681.css"
    integrity="sha256-Qj3uF8YvVfpzOk7hPgDVI9/OiMxPSrRUmiS6Nr2d5oE="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.b7d54133b27e5b4de15245b8e143de3e8ed2d674c706137274cedc9953f31917.css"
    integrity="sha256-t9VBM7J&#43;W03hUkW44UPePo7S1nTHBhNydM7cmVPzGRc="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="http://JacksonK9.github.io/robotics/dilly_woohyung/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js"
      integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8="
      crossorigin="anonymous"
    ></script>

  

  


  
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://JacksonK9.github.io/images/site-feature-image.png"/>

<meta name="twitter:title" content="우아한형제들 - 배달로봇 딜리"/>
<meta name="twitter:description" content="배달로봇 딜리를 조종하는 흑마술
흑마술?  마법 같은 건 없음 ^^, 이것은 지식입니다."/>



  
  <meta property="og:title" content="우아한형제들 - 배달로봇 딜리" />
<meta property="og:description" content="배달로봇 딜리를 조종하는 흑마술
흑마술?  마법 같은 건 없음 ^^, 이것은 지식입니다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://JacksonK9.github.io/robotics/dilly_woohyung/" /><meta property="og:image" content="http://JacksonK9.github.io/images/site-feature-image.png"/><meta property="article:section" content="robotics" />
<meta property="article:published_time" content="2022-05-15T19:28:25+09:00" />
<meta property="article:modified_time" content="2022-05-15T19:28:25+09:00" /><meta property="og:site_name" content="TIL the END" />




  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "robotics",
        "name": "우아한형제들 - 배달로봇 딜리",
        "headline": "우아한형제들 - 배달로봇 딜리",
        "alternativeHeadline": "",
        "description": "
      
        배달로봇 딜리를 조종하는 흑마술\n흑마술?  마법 같은 건 없음 ^^, 이것은 지식입니다.


      


    ",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/JacksonK9.github.io\/robotics\/dilly_woohyung\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Jackson Kim"
        },
        "creator" : {
            "@type": "Person",
            "name": "Jackson Kim"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Jackson Kim"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Jackson Kim"
        },
        "copyrightYear" : "2022",
        "dateCreated": "2022-05-15T19:28:25.00Z",
        "datePublished": "2022-05-15T19:28:25.00Z",
        "dateModified": "2022-05-15T19:28:25.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Jackson Kim",
            "url": "http://JacksonK9.github.io/",
            "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/JacksonK9.github.io\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
        
        "http://JacksonK9.github.io/images/site-feature-image.png"


      
      ]

    ,
        "url" : "http:\/\/JacksonK9.github.io\/robotics\/dilly_woohyung\/",
        "wordCount" : "510",
        "genre" : [ ],
        "keywords" : [ ]
    }
  </script>



</head>
<body
    
      class="body theme--light"

    
  >
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"

        
      ><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/K9.jpg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">TIL the END</a>
        </div>

      
      <div class="sidebar__introduction-description">
        <p>Wanna be Good SLAMer</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/JacksonK9/"
            target="_blank"
            rel="noopener"
            aria-label="GitHub"
            title="GitHub"
          >
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li class="sidebar__list-item">
          <a
            href="mailto:k9632441@gmail.com"
            target="_blank"
            rel="noopener"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Jackson Kim
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script></div>
</aside>
      <main
        
          class="wrapper__main"

        
      >
        <header class="header"><div
  class="
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        


      
        
        

          <li class="nav__list-item">
            <div class="optionswitch">
              <input class="optionswitch__picker" type="checkbox" id="1" hidden />

              
              
                


              
                


              
                


              
                


              
                


              


              <label class="optionswitch__label" for="1"
                >Posts <i class="fa fa-angle-down" aria-hidden="true"></i
              ></label>

              <div class="optionswitch__triangle"></div>
              <ul class="optionswitch__list">
                
                  <li class="optionswitch__list-item">
                    <a
                      href="/algorithm/"
                      
                      title=""
                      >Algorithm</a
                    >
                  </li>

                
                  <li class="optionswitch__list-item">
                    <a
                      href="/programming/"
                      
                      title=""
                      >Programming</a
                    >
                  </li>

                
                  <li class="optionswitch__list-item">
                    <a
                      href="/cv/"
                      
                      title=""
                      >Computer Vision</a
                    >
                  </li>

                
                  <li class="optionswitch__list-item">
                    <a
                      href="/robotics/"
                      
                      title=""
                      >Robotics</a
                    >
                  </li>

                
                  <li class="optionswitch__list-item">
                    <a
                      href="/etc/"
                      
                      title=""
                      >ETC</a
                    >
                  </li>

                
              </ul>
            </div>
          </li>

        


      
        
        
          <li class="nav__list-item">
            <a
              
              href="/plans/"
              
              title=""
              >Plans</a
            >
          </li>

        


      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>

      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown

    "
  >
    
    <div class="post__content">
      <h1>우아한형제들 - 배달로봇 딜리</h1>
      
        <ul class="post__meta">
          <li class="post__meta-item">
            <em class="fas fa-calendar-day post__meta-icon"></em>
            <span class="post__meta-text"
              >
                2022/05/15


              
            </span>
          </li>
          <li class="post__meta-item">
            <em class="fas fa-stopwatch post__meta-icon"></em>
            <span class="post__meta-text">3-minute read</span>
          </li>
        </ul>

      <p><a href="https://www.youtube.com/watch?v=yrJBmBrA9TE">배달로봇 딜리를 조종하는 흑마술</a></p>
<h4 id="흑마술">흑마술?</h4>
<ul>
<li>마법 같은 건 없음 ^^, 이것은 지식입니다.</li>
</ul>
<h4 id="자율주행">자율주행?</h4>
<ul>
<li>실외에서는 변수가 너무 많음</li>
<li>99.9%라면 월 1억건 기준 10만명은 치킨을 못먹을 수 있음&hellip;ㅠ</li>
<li>99.9999%라면 월 1억건 기준 100명까지 가능</li>
<li>그래서 모니터링 기능을 추가했습니다 :)</li>
</ul>
<h4 id="teleoperation">Teleoperation?</h4>
<ul>
<li>기계나 장치를 원격으로 제어하는 것(사전적 의미)</li>
<li>원격에서 배달 로봇의 상태를 모니터링</li>
</ul>
<h4 id="배민에서-구현한-방법">배민에서 구현한 방법?</h4>
<ul>
<li>요구 사항 확인
<ul>
<li>카메라는 몇 대?</li>
<li>화각은 얼마나 필요한가?</li>
<li>해상도는 어느정도까지?</li>
<li>초당 프레임 수는 얼마나?</li>
<li>레이턴시는 어느정도까지 괜찮을까?</li>
<li>네트워크 대역폭 (얼마나 많은 내용을 한 번에 전송 가능한가?)</li>
<li>네트워크 레이턴시 (보낸 데이터를 얼마나 빠르게 볼 수 있는가?, 지연 시간)</li>
</ul>
</li>
<li>SW 고려 사항
<ul>
<li>SNS 라이브 테스트 $\rightarrow$ 레이턴시 19.24초, 너무 느림</li>
<li>로봇 속도가 7km/h, 영상 레이턴시가 1초 $\rightarrow$ 멈춤 클릭 후, 2미터 이동 후 멈춤</li>
<li>당연히 짧으면 짧을수록 안전</li>
<li>화상 회의, 채팅 앱 설치를 통해 프로토타이핑 테스트를 통해 느낀 점
<ul>
<li>후방 카메라의 필요성</li>
<li>영상 흔들림 정도 및 해상도 설정 필요</li>
<li>실제 거리감, 지도 표시</li>
<li>장애물 시각화, 음성 표시 기능 필요</li>
<li>네트워크 레이턴시 및 음영지역 확인 필요</li>
<li>오퍼레이터 교육이 필요</li>
</ul>
</li>
<li>사무실에서의 원격 조종시 느낀 점(소리가 없음)
<ul>
<li>후방카메라 꼭 필요하다</li>
<li>화면 비율이 가로로 넓은 것이 중요</li>
<li>로봇 따라 다닌 사람, 조종한 사람을 지켜본 사람 둘다 불안</li>
<li>의외로 조종한 사람은 불안하지 않았음</li>
</ul>
</li>
<li>WebRTC
<ul>
<li>레이턴시가 짧고, 화상 회의에서 많이 사용, 앱 설치 없이 웹에서 바로 확인 가능</li>
<li>사내 Wifi에서는 잘됨 But, LTE 라우터가 잘 안됨
<ul>
<li>Kinesis Video Stream WebRTC를 이용하여 해결</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>HW 고려 사항
<ul>
<li>카메라
<ul>
<li>야간 운행에 문제가 있음
<ul>
<li>초 저조도 카메라로 문제 해결</li>
</ul>
</li>
</ul>
</li>
<li>기구 설계
<ul>
<li>기구 설계를 통해 Blind Spot 확인 및 360도를 확인할 수 있게 카메라 설치</li>
</ul>
</li>
</ul>
</li>
<li>맛보기
<ul>
<li>Nvidia Jetson Xavier에 카메라 4대, AWS Kinesis 사용</li>
<li>크게 문제 없이 동작 완료</li>
</ul>
</li>
</ul>
<h4 id="aws-kinesis-webrtc">AWS Kinesis WebRTC</h4>
<ul>
<li>Why WebRTC
<ul>
<li>1초 이하의 latency를 가짐</li>
</ul>
</li>
<li>STUN, TURN, 시그널링 서버 제공</li>
<li>다양한 SDK 제공 (Backend 구성이 필요 없음)</li>
</ul>
<h4 id="만들어-보기">만들어 보기</h4>
<ul>
<li>GStreamer
<ul>
<li>멀티 플랫폼, 멀티 미티어 프레임워크</li>
<li>맥, 윈도우, 리눅스, 모바일에서도 사용 가능</li>
</ul>
</li>
<li>C SDK를 이용한 빌드 방법 소개</li>
<li>js SDK를 이용한 사용 방법 소개</li>
<li>4개 영상 합쳐서 전송 방법 소개</li>
<li>내용이 많아서, 영상을 직접 확인하는 것이 좋습니다.</li>
</ul>
<h4 id="운영-중-어려움-및-해결-방안">운영 중 어려움 및 해결 방안</h4>
<ul>
<li>네트워크 안정성, 레이턴시
<ul>
<li>제어할 수 없는 것: 대역폭, 전송 프로토콜 (TCP or UDP)</li>
<li>제어 가능한 것: 비트레이트, 영상 코덱, 레이턴시</li>
<li>미리 네트워크 상황에 대해서 서비스 예정 지역을 조사해보는 것이 중요</li>
<li>WebRTC 영상이 끊기는 경우
<ul>
<li>접속 실패</li>
<li>방화벽, 네트워크 전환, 피어 오프라인</li>
<li>시그널링이 끊기는 경우</li>
</ul>
</li>
<li>해결을 위해 WebRTC + MQTT 사용
<ul>
<li>유언장(LWT) 기능
<ul>
<li>로봇과 MQTT 서버 연결될 때, LWT 전달</li>
<li>끊어지면, LWT 발행</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>상황 인지
<ul>
<li>거리감을 느끼기 힘든 문제가 있음</li>
<li>영상에 가이드라인 및 지도 추가</li>
</ul>
</li>
<li>외부 요인
<ul>
<li>도로교통법, 개인정보보호법, 생활물류법, 승강기안전관리법, 입주민과 건물주의 동의 등</li>
<li>제도적인 개선이 필요ㅠㅠ</li>
</ul>
</li>
<li>휴먼 에러
<ul>
<li>Active Safety Logic을 추가하는 방법을 통해 해결 가능</li>
</ul>
</li>
</ul>
<h4 id="to-be-developed">To be developed</h4>
<ul>
<li>GStreamer 파이프라인 개선</li>
<li>영상 전송 끊김 문제 개선</li>
<li>영상 저장/재생 + 모자이크 처리 (개인정보 보호법)</li>
<li>주행 안전과 관련된 기능은 네트워크와 별개로 처리</li>
<li>오퍼레이터 1명이 여러 대를 모니터링 가능하도록&hellip;</li>
</ul>
<h4 id="운영중인-곳">운영중인 곳</h4>
<ul>
<li>앨리웨이 광교 (실외 로봇 배달 서비스)</li>
<li>영등포 포레나 (실내 로봇 배달 서비스)</li>
<li>광화문 디타워 (실내 로봇 배달 서비스)</li>
<li>전국적으로 실내 서빙 로봇</li>
</ul>
<h4 id="요약">요약</h4>
<ul>
<li>로봇 구성에 대한 실질적인 내용보다는 실시간 스트리밍에 대한 내용 위주였던 것 같음</li>
<li>사실 라이다, 기구부 등에 대한 내용이 더 궁금하긴 했는데&hellip;</li>
<li>어쨌든 이런 방법을 통해서 운영을 하고 있다는 사실을 알게된 것으로 만족한다.</li>
</ul>
</div>
    <div class="post__footer">
      

      
    </div>

    <div id="comment">
          <h2>comments</h2>
          <script
  src="https://utteranc.es/client.js"
  repo="JacksonK9/blog_comments"
  issue-term="pathname"
  theme="preferred-color-scheme"
  
  crossorigin="anonymous"
  async
></script>

        </div>
  </div>


      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Jackson Kim
        2022


      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js"
    integrity="sha256-o/0GOK2k487Ch&#43;SaYEtKgoz&#43;8zpmmv5guWV1dh//XPM="
    crossorigin="anonymous"
  ></script><script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script></body>
</html>
